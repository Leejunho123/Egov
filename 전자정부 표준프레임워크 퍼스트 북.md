# 전자정부 표준프레임워크 퍼스트 북 
### https://www.egovframe.go.kr/home/ntt/nttRead.do?menuNo=65&bbsId=4&nttId=1449

1. 전자정부 표준프레임워크
    + 공공사업에 적용되는 SW 프레임워크의 표준을 정립
    + 응용 SW 표준화
    + 품질 및 재사용성을 높일 수 있는 기반 제공
    

1. 전자정부 표준프레임워크  
    1. SW 프레임워크 등장배경
        - 메인프레임 시대부터, Client/Server, 시대의 전환인 WEB의 등장 모바일/클라우드 시대까지 변화해오면서, 이제는 누구나 소프트웨어를 사용하고, 사용해야만 생활할 수 있는 시대가 되었다. 최근 들어서는 twitter, Facebook 등 소셜미디어의 등장으로 거대한 데이터들이 날마다 생산. 이러한 데이터를 분석, 활용/처리 하는 데 IT 업계의 대표적인 이슈
        - 가장 중요시 되던 부분 : 자동화, 재사용
        - 기술 발전으로 실시간 처리와 일괄 처리로 구분.
        - 소프트웨어 규모의 대형화 및 복잡화 -> 개발 비용 증대
        - 일관되지 않은 개발 방식 -> 유지보수성 악화
        - 새로운 기술 교육 및 훈련 부족 -> SW 개발 및 운영에 많은 문제점 발생.
        - 이 원인들로 다양한 발전이 있었음

1. 전자정부 표준프레임워크  
    1. SW 프레임워크 등장배경
        1. 소스 재사용
            - 초보적인 재사용 방식으로 과거 코드를 복사해서 사용
        2. 재사용 메소드
            - 복사/붙이기 방식과 동일한 코드가 여러 클래스에서 나오는 것을 지양
            - 라이브러리로 만들어 재사용하는 방식
        3. 재사용 객체
            - 기존의 재사용방식 - 소스 재사용, 재사용 메소드 - 들은 자바뿐만 아니라 다른 언어를 사용할 때도 가능한 방식이나, 확장이 쉽지 않은 방식이었다면, 자바 언어에서는 클래스는 설계하고 상속, 확장하는 방식으로 재사용을 진행.
        4. 디자인패턴
            - 클래스의 재사용 방식이 객체의 수직적인 재사용 방식, 디자인 패턴은 상황적인 문제를 해결해주는 재사용 방식.
            - 메커니즘의 재사용으로 진행
        5. SW 프레임워크
            - 디자인 패턴은 상황에 대한 해결이 가능. 시스템 전체에 대해서는 직접 패턴을 적용하여 문제를 해결.
            - 이러한 문제점을 해결하기 위해 전체 시스템적 관점에서 표준화된 디자인 패턴을 적용한 설계 및 구현체가 SW 프레임워크

1. 전자정부 표준프레임워크
    2. SW 프레임워크 정의
        - SW 프레임워크의 사전적 의미 : 무엇을 이루는 뼈대 혹은 기반 구조.
        - 개발을 도와주는 부분부터 사상에 이르기까지 다양한 범위로 논의.
        - 소프트웨어 시스템에 대한 라이브러리 또는 클래스의 재사용 세트
        - 소프트웨어의 특정 클래스에 대한 재사용 가능한 디자인을 구성하는 클래스틀 협력의 집합 - GoF 패턴
        - 종합 정의
            - 일련의 문제 해결을 위한 추상화된 디자인을 구현한 클래스들의 집합으로 클래스 보다는 큰 규모의 재사용을 지원
            - 구체적이며 확장 가능한 기반 코드, 설계자가 의도하는 아키텍쳐와 디자인 패턴 집합
            - 실전에서 얻은 최적화 개발 경험을 반영한 재사용 가능한 API집합
            - 라이브러리와 달리 어플리케이션의 틀과 구조를 결정, 그 위에 개발된 개발자의 코드를 제어하는 반 제품 성격의 소프트웨어
            
        - 장점
            - 개발용이성
            - 시스템 복잡도의 감소
            - 이식성
            - 품질보증
            - 운영 용이성
            - 개발코드의 최소화
            - 변경용이성
            - 설계와 코드의 재사용성
            
        

1. 전자정부 표준프레임워크
    3. 표준프레임워크 개요
        - 표준프레임워크 전 전자정부 지원사업 시에 대기업의 SW 프레임워크가 도입 활용.
        - 그로 인한 문제점 : 폐쇄적 정책. 자사 SW 프레임워크를 공개, 판매 하지 않아 상호호환성을 보장하기가 어려움
        - 따라서 연속 사업 혹은 유지보수사업의 사업자 변경을 원칙적으로 어렵게 한다는 문제가 있었다.
        - 이미 특정 SW 프레임워크를 활용하여 구축된 소스코드를 다른 SW 프레임워크로 변경이 불가능하기 때문에 SW 프레임워크의 적용은 불가피하게 소스 코드의 종속성 문제를 가지게 됨.
        - 결국 공동 SW 프레임워크 필요성
        - 표준프레임워크는 실행, 개발, 관리, 운영 등 4개의 환경 과 모바일 표준프레임워크, 공통컴포넌트로 구성.
        - 참조프레임워크로 대표적인 오픈소스 SW프레임워크인 스프링 프레임워크 채택
        - OSS를 적용/ 활용하여 구성
        - 전자정부 서비스의 품질향상, 정보화 투자 효율성 향상을 달성
        - 대,중소기업이 동일한 개발기반 위에서 공정 경쟁이 가능하게 된다.
        - 표준프레임워크는 기존 다양항 플랫폼 환경을 대체하기 위한 표준은 아니며, java 기반의 정보시스템 구축에 활용할 수 있는 개발,운영 표준 환경을 제공하기 위한 것.
        - 공공 정보화 사업에 많이 활용되는 인프라 환경과의 호환성 보장
        - 광범위한 보급-확산을 위해 소스 뿐만 아니라 분석-설계 산출물도 함께 공개
        - 다수가 만족하는 표준이 될 수 있도록, 개발 과정에서 다양한 전문가로 구성된 협의회 의견을 청취-반영
        

1. 전자정부 표준프레임워크
    4. 표준프레임워크 활용 고려 사항
        1. 자바 기반의 웹 응용 시스템(WAS가 존재하는 경우)
        2. (2.7 기준) JavaEE(J2EE) 5 혹은 JDK1.5 이상의 환경 (단, 개발환경 2.7 이상에서는 JDK 1.6이상 필요)...
        3. 신규 개발시스템으로써, 기존 시스템과 물리적 혹은 논리적으로 구분되는 경우
        
        + 표준프레임워크는 표준으로써 목적을 만족하기 위하여 아래의 규칙을 준수하여 적용
            - 실행환경은 원칙적으로 변경 없이 활용해야 함
            - 개발환경은 기능의 변경과 추가에 제약사항 없음
            - 공통컴포넌트는 변경 가능하나, 표준프레임워크 아키텍쳐 준수 필요
            

2. 개발환경 구성하기
    1. 개발환경 구성
        - 구현도구, 테스트도구, 형상-변경관리 도구, 배포도구로 구성
            - 구현도구 : 프로그램 개발, 컴파일, 디버그 등 개발자 개별 환경 제공
            - 테스트도구 : 개발자가 단위테스트를 수행하고 결과를 리포팅
            - 형상-변경관리 도구 : 개발자가 작성한 소스코드를 통합하여 버전관리 수행
            - 배포도구 : 형상관리의 소스코드를 통합 빌드하고 개발 서버 등에 배포
        - 개발환경 : 개발자 PC에서 작업이 진행되는 개발자 개발환경과 개발서버 및 운영서버에서 진행되는 서버개발환경으로 구성
        - 개발자 : 개발 환경을 활용 소스코드를 제작, 컴파일 및 테스트를 구행하고 실행 가능한 형태로 빌드
        - 개발자 개인 별 소스코드를 수정하여 commit하거나 update하는 형태로 공동작업 형태 개발.
        - 배포도구는 통합저장된 소스코드를 불러와서 통합 빌드한다.
        - 웹 어플리케이션 서버 등에서 실행이 가능한 형태로 구조화하여 배포
        - 주요 오픈소스
            - 구현도구 : Eclipse, PMD, Maven
            - 테스트도구 : JUnit, EasyMock, DbUnit, EclEmma
            - 형상-변경관리도구 : Subversion, jTrac
            - 배포도구 : Hudson, Nexus, Maven
                - Eclipse : 자바 소스코드를 편집, 컴파일, 테스트, 실행이 가능하도록 지원하는 대표적인 개발도구
                - PMD : Eclipse 플러그인. 룰셋 기반으로 소스코드 오류 등을 검사하여 품질을 높이도록 한다.
                - Maven : 소스코드 컴파일에 필요한 라이브러리를 관리하고 컴파일, 테스트, 빌드 등 작업을 수행
                - JUnit : 단위테스트 코드를 작성하여 테스트하도록 지원한다.
                - EasyMock : 웹 어플리케이션을 실행하지 않고도 테스트가 가능하도록 시뮬레이션 환경을 지원
                - DBUnit : DB 테스트 데이터를 생성 결과가 미리 입력된 결과값과 같은지 비교할 수 있도록 환경 지원
                - EclEmma : 실제 소스 코드에서 단위테스트로 수행된 부분이 어느 정도인지 퍼센트 형태로 정보를 알려주는 coverage 테스트
                - Subversion : 형상관리도구. 소스 통합 버전관리
                - jTrac : 변경관리 이력 등을 추적 가능
                - Hudson : 지속적 테스트와 통합을 지원하는 CI 도구
                - Nexus : Maven 라이브러리 3rd Party로 제공시에 활용
   
            

2. 개발환경 구성하기
    2. 개발환경 설치 및 구성
        - 프레임워크 홈페이지에서 제공하는 교육교재를 활용하는 방법 : 모두 구성. 활용 가능
        - 표준프레임워크에서 개발환경을 내려 받고 Tomcat,JDK 등 필요한 설정을 한다.
        - 기존에 활용하던 Eclipse에 표준프레임워크 플러그인을 설치하여 활용하는 방법
        1. 교육실습교재 사용
            - 교육자료 다운.
            - 표준프레임워크을 처음 사용하는 사용자나 자바에 익숙하지 않은 개발자들은 처음에는 이 방법을 활용하여 사용하는 것을 권장
            - 필요한 소프트웨어 및 설정이 되어 있어 바로 활용 가능
        2. 개발환경 구성
            - Tomcat 등등 다 설치해주고 연동까지 해줘야 한다.
        3. 기존 Eclipse에 플러그 인 설치
            - 개발은 가능. egovFrame전용 도구는 활용 불가.

3. 개발자 개발환경 활용
    1. 구현도구 활용
        - Eclipse Java EE를 기반으로 표준 프레임워크 플러그인이 설치되어 있다.
        - Eclipse 기본화면은 메뉴바, 툴바, 퍼스펙티브바, 4개의 뷰 영역으로 구성
        - 4개의 뷰를 포함하는 전체 영역을 퍼스펙티브, Eclipse Window 전체를 워크벤치라 부름
        - 구현도구는 통합메뉴, 퍼스펙티브, 뷰, 에디터 등을 제공
        - eGovFrame 퍼스펙티브를 선택하면, 메뉴에 eGovFrame 통합 메뉴가 나타나게 된다.
        - 통합메뉴는 유형별 프로젝트 생성, 각종 다이어그램 작성, SQLMap 편집, 공통컴포넌트 생성 등 기능을 제공.
    2. Maven 활용
        1. 라이브러리 의존성 관리
            - 기존에 개발된 수많은 라이브러리를 활용하여 필요한 기능을 쉽게 확장할 수 있다는 장점
            - 종속성 및 버전관리가 어려운 문제
            - 특징 라이브러리를 활용하기 위해서는 참조하고 잇는 다른 라이브러리도 함께 활용이 되어야 한다.
            - A라는 라이브러리가 B와 C라이브러리 기능을 활용하고 있다면 A만 가지고는 활용이 불가능. B,C를 함께 참조
            - 버전 문제
            - 이 모든 라이브러리의 Build Path를 개별적으로 설정은 불가능
            - Maven은 이러한 라이브러리 관리 문제를 해결하기 위해 의존성 설정을 활용하여 라이브러리를 관리
            - 실제 pom파일 dependency가 의존성 설정인데 모든 jar가 들어가 있지 않다. 이는 특정 라이브러리를 다운받을 때 그 라이브러리에도 pom 파일이 존재하여 그 안의 버전에 따른 다른 라이브러리 또한 다운받기 때문. 이는 Maven local repository에 저장되어 있다.
            - pom dependency 예제
                ```
                <dependency>
                 <groupId>egovframework.rte</groupId>  라이브러리 식별 namespace
                 <artifactId>egovframework.rte.ptl.mvc</artifactId>  라이브러리 명
                 <version>{egovframework.rte.version}</version>  버전정보
                 <exclusions>  옵션이며, 충돌 등의 이유로 특정 라이브러리 의존성 제거
                 <exclusion>
                 <artifactId>commons-logging</artifactId>
                 <groupId>commons-logging</groupId>
                 </exclusion>
                 </exclusions>
                </dependency>
                ```
            - 처음 Maven 실행 시 Local Repository에 라이브러리가 없다면 pom.xml의 repository에 기술된 Remote Repository로부터 라이브러리를 다운받게 된다. 사용자가 Nexus 등을 활용하여 개별적 3rd Party 라이브러리를 구성할 수도 있다. 인터넷이 차단된 폐쇄망에서는 필수적으로 별도 Repository를 구성해야함
        2. 빌드 관리
            - Maven에서는 디렉터리 구조를 정규화. 복잡한 설정 없이 컴파일, 패키징 등을 수행가능.
            - 실제 소스파일, 테스트 소스 파일로 구성. resources 디렉터리에는 jar나 war로 패키징 될 때 함께 배포되어야 할 설정파일 등의 리소스가 위치
            - 웹 프로젝트의 경우 webapp 밑에 MVC 설정과 웹 리소스 (HTML, 자바스크립트, 이미지 등)가 위치.
        3. Maven 설정
            - pom.xml : 프로젝트의 정보, 의존성, 빌드 세팅(플러그인) 정보를 포함하고 있다. Maven 프로젝트는 빌드 되어 로컬 또는 원격 Repository에 배포될 수 있기 때문에 자체적으로 GroupId, Artifact Id, 버전 정보를 가짐.
            - 라이브러리 관리를 위한 의존성 관리
            - 컴파일, 패키징 뿐만 아니라 테스트 결과 리포트, java doc 생성과 같은 작업들을 플러그인 설정을 통해서 수행 가능.
            - Maven 은 빌드 작업시에 플러그인을 활용하여 생명주기 단계별로 플러그인을 바인딩하여 작업을 처리.
            - 플러그인의 설정은 pom.xml의 pluginManagement 에 기술.
            - 표준프레임워크에서 설정하여 제공하고 있는 주요 Maven 플러그인 정보
                - complie : maven-compiler-plugin : 소스코드 컴파일
                - test : maven-test-plugin, maven-surefire-plugin : 단위테스트 실행과 리포트 생성
                - package : maven-jar-plugin, maven-war-plugin : 압축파일 생성
                - emma : maven-emma-plugin : Code coverage report 생성
            - maven build 시 모든 필요한 소스들 다운로드
            - maven install 시 compile, test, package, install의 순서로 실행
                - compile : resources 플러그인이 실행, 소스 코드가 copy, compiler 플러그인이 동작하여 컴파일을 수행
                - test : test 플러그인이 실행, 단위테스트 수행, surefire 플러그인을 통해 테스트 결과 리포트 생성
                - package : war 플러그인이 동작되어 war 배포파일 생성.
                - install 단계에서 로컬 repository로 배포.

4. 서버 개발환경 활용
    1. 형상관리 도구 활용
        1. Subversion 개요 및 설치
            + 형상관리 도구는 팀프로젝트 수행시에 개인 개발자들이 작성한 소스코드를 하나의 프로젝트로 통합.
            + 변경된 내용을 버전관리하여 변경 히스토리를 관리하고 필요한 경우 이전 버전으로 변경할 수 있도록 기능을 지원.
            + Subversion은 파일 뿐 아니라 디렉터리도 버전관리를 지원. 변경관리를 변화된 부분만 관리하여 성능이 우수.
            + 윈도우 환경의 서버 VisualSVN을 활용하면 SubVersion을 쉽게 설치할 수 있음.
        2. Revisions
            + 저장소에 저장된 각각의 파일 버전.
            + Commit 시에 일정한 규칙에 의해서 숫자가 증가.
            + Subversion은 변경 발생 시에 전체 단위로 Revision을 갱신하여 관리.
            + 개발 파일 단위로 Revision을 관리하게 되면 전체적으로 소스코드에 변경이 일어난 순서 정보를 알기 어렵게 됨.
        3. Eclipse와 연동
            + Subversion을 활용하기 위해 제일 먼저 해야 하는 일은 프로젝트 최초 commit하는 것.
            + 최초 commit이 되어 Subversion repoistory에 저장.
            + 다른 개발자들이 자신의 workspace로 내려 받아 활용 가능 이를 check out.
            + 그 후에는 commit, update
            + 종종 충돌 가능. 다시 Commit or Update 하면 됨 (Override and Commit, Override and Update)

4. 서버 개발환경 활용
    2. 배포 도구 활용
        1. CI 개요 및 설치
            - 전통적으로 SW 개발은 분석, 설계, 개발, 테스트의 순서로 진행
            - 프로젝트의 위험 요소는 에러, 미개발, 요구사항 미 충족 등의 결함이 프로젝트 후반 특히 오픈 직전에 발견
            - 이러한 문제를 해결하기 위해 소스코드 통합과 테스트를 상시적으로 수행하는 개념이 CI이다.
            - 많은 개발자로 구성된 팀이 작업한 것을 짧은 주기로 통합 및 테스트를 수행하는 소프트웨어 개발 방식이다.
            - commit -> 형상관리 서버에서 통합 -> check out -> Maven 등 도구 활용하여 테스트 및 빌드.
            - 주로 Maven package를 수행하여 테스트 및 배포파일 생성. 개발서버 배포
            - 라이브러리 : Maven deploy를 실행하여 Nexus 등의 원격 Repository로 배포할 수 있다.
            - CI 서버로는 Hudson이 많이 활용되었으나 Sun이 Oracle로 흡수 합병에 따라 기존 Hudson 오픈소스 프로젝트에 변경이 생기면서 Jenkins 프로젝트가 시작되었다.
            - Hudson도 Eclipse에서 오픈소스 프로젝트로 개발이 진행 중에 있으나 Jenkins보다 업데이트 등이 활발하지 못한 상태.
            - 두 개의 CI서버는 거의 동일한 기능을 가지고 있기 때문에 굳이 구별할 필요는 없지만, 사용성 및 향후 발전 측면에서는 Jenkins가 더 유리한 상태이므로 Jenkins 기준으로 설명.
            - war파일 Tomcat 등의 WAS 의 webapp 밑에 압축을 풀어 주는 것으로 설치가 완료.
            - Hudson의 경우도 마찬가지로 설치가능.
            - Jenkins의 경우 WAS까지 패키징하여 윈도우, 맥 등의 실행파일 형태로 설치할 수 있도록 지원하고 있다.
            - 이 경우 별도의 WAS의 설치가 불필요하여 편리하지만 OS에서 자동 실행되는 서비스로 등록되기 때문에 개발 및 테스트 용도로는 관리가 어려울 수 있다.
           
            
            

5. 실행환경 소개
    1. 실행환경 구성
        + 실행환경은 화면처리, 업무처리, 데이터처리, 연계, 공통기반, 배치처리 Layer로 구성
            + 화면처리 Layer : 사용자 인터페이스 및 화면 구현에 필요한 기능과 구조 제공
            + 업무처리 Layer : 예외 처리 및 업무흐름 처리 기능을 제공
            + 데이터처리 Layer : 개발자가 작성한 소스코드를 통합하여 버전관리 수행
            + 연계 Layer : SOAP기반 웹 서비스 기능 제공
            + 공통기반 Layer : 재사용 컴포넌트, 로그 등 개발에 필수적인 기능 제공
            + 배치처리 Layer : 일괄처리를 위한 설정 및 실행 기능 제공
            
        + 실행환경 Layer별로 하위 서비스를 제공. 화면처리 Layer의 경우 기본 패턴인 MVC이외에 국제화, Ajax, 국제화 등 기능을 제공.
        + 데이터처리 Layer 의 경우에는 DB 접속을 위한 DataSource
        + SQL을 XML 설정파일에서 관리 할 수 있도록 지원하는 Data Access
        + 자바코드로 SQL을 대신할 수 있는 ORM 서비스
        + 공통기반 레이어에는 표준 패턴을 제공하는 IOC,AOP와 Logging 등 서비스를 제공
        ![image](https://user-images.githubusercontent.com/73324807/114120956-7ecc6c80-9928-11eb-9710-6d952c20b5e7.png)
        + 표준프레임워크 실행환경에서 서비스 별로 채택 활용하고 있는 대표적은 오픈소스는 다음과 같다.
        ![image](https://user-images.githubusercontent.com/73324807/114120982-88ee6b00-9928-11eb-8ab5-65a70c463d48.png)
        + 표준프레임워크 주요 패턴과 기능은 Spring 프레임워크 기반으로 구성.
        + Spring 프레임워크 : Java 웹 어플리케이션 개발을 쉽게 해주는 오픈소스 SW 프레임워크이다.
        + 인터페이스와 구현으로 구성된 자바 객체는 Spring 컨테이너에 빈 형태로 등록되어 활용된다.
        + Spring 프레임워크는 IoC 컨테이너로 구성되는 CORE, DB를 지원하는 DAO, JPA 등 ORM 메시징 등 Enterprise 환경을 지원하는 JEE, 웹 환경을 지원하는 WEB의 패키지로 구성된다.
        ![image](https://user-images.githubusercontent.com/73324807/114120834-4036b200-9928-11eb-83f9-a6b03da297ae.png)
        ![image](https://user-images.githubusercontent.com/73324807/114120909-68261580-9928-11eb-8667-69019426562d.png)

6. DI
    + 자바프로그래밍 시 구현된 기능을 다른 소스코드에서 활용할 때 설정되어 있는 소스코드 간의 종속성 부분은 재사용에 큰 어려움을 주게 된다.
    + 이러한 문제를 해결하기 위해 DI를 활용하여 소스코드간에 직접적으로 종속성을 가지지 않고, 참조 정보를 XML 설정파일이나 annotation을 활용하도록 한다. -> 소스코드를 직접 고치지 않고 소스코드를 참조할 수 있도록 지원
    1. 자바 인터페이스
        + 자바 인터페이스는 클래스들이 구현해야 하는 동작을 지정하는 데 사용되는 추상형, 클래스들이 지켜야 하는 형식을 정의
        + 인터페이스는 클래스에서 외부로 노출되어 활용되는 변수나 메소드 정보를 제공하여 다른 클래스에서 쉽게 참조할 수 있도록 한다.
        + 그리고, 현재의 클래스를 다른 클래스로 대체하기 위해 반드시 구현이 필요한 메소드 정보를 제공한다.
        + 인터페이스에 있는 메소드만 구현이 되면 클래스를 다른 클래스로 교체하여 사용할 수 있다.
        + 일반적으로 컴포넌트를 구성할 때 인터페이스와 클래스를 묶어서 구성하게 된다.
        + 컴포넌트는 특정한 기능을 다른 기능으로 쉽게 대처할 수 있도록 구성이 되어야하기 때문에 인터페이스 정보는 필수적이다.
        + 외부의 다른 클래스에서 활용가능한 메소드는 인터페이스에 기술되어 있기 때문에 인터페이스에 있는 정보만 참조하면 된다.
        + 인터페이스를 활용하여 클래스 정보의 추상화, 캡슐화가 가능하다.
        + 그림에서 NameServiceImpl 클래스에 많은 메소드가 있지만 NameService 인터페이스를 Type으로 활용하고 클래스 인스턴스를 생성하게 되면 다른 메소드들은 참조할 수 없고, 인터페이스에 기술된 getName()만 참조가 가능하다.
        + 자바에서 클래스 인스턴스를 생성할 때 별도 인터페이스를 생성하지 않고 클래스 자체를 Type으로 생성할 수 있으나, 인터페이스를 활용하는 경우 다른 클래스에서 참조 가능한 메소드만 표현하고, 다른 메소드들은 노출시키지 않아도 되기 때문에 활용이 편리하다.
        ![image](https://user-images.githubusercontent.com/73324807/114121018-960b5a00-9928-11eb-946d-e1d63b33a443.png)

        


































































